### 19. NIO 기반 입출력 및 네트워킹

IO와 NIO의 차이점

| 구분 | IO | NIO |
| --- | --- | --- |
| 입출력 방식 | 스트림 방식 | 채널 방식 |
| 버퍼 방식 | non-buffer | buffer |
| 비동기 방식 | 지원 안 함 | 지원 |
| 블로킹 / 넌 블로킹 방식 | 블로킹만 지원 | 모두 지원 |

- 스트림 방식 vs 채널 방식

스트림 방식을 사용하는 `IO`는 입력 스트림과 출력 스트림이 구분되어 있다.

그래서 입출력 모두 작업한다면 `InputSream`, `OutputStream` 모두 생성해야 한다.

채널 방식을 사용하는 `NIO`는 양방향으로 입력과 출력이 가능하다.

그래서 입출력 모두 작업하더라도 `Channel` 하나만 생성하면 된다.

---

- buffer vs non-buffer

buffer 방식을 사용하는 것이 더 빠르다.

IO의 경우 Stream 말고도 `Buffered(Input/Output)Stream`을 이용해서 buffer 방식을 사용하긴 한다.

NIO의 경우 기본적으로 buffer를 사용하기 때문에 IO보다는 입출력 성능이 더 좋다.

`IO`는 스트림에서 읽은 데이터를 즉시 처리하고,

`NIO`는 buffer에 저장해 두어서 buffer 내에서 데이터의 위치를 이동해 가면서 필요한 부분만 읽고 쓸 수 있다.

---

- blocking vs non-blocking

`IO`에서 사용하는 `blocking 방식`은 read(), connect()와 같은 메소드 호출 시

데이터가 입력되기 전까지 `대기 상태`가 되는것을 말한다. 또한, blocking 시에 `인터럽트`로도 빠져 나올 수 없다.

NIO의 경우 `blocking`, `non-blocking방식` 모두 지원한다.

NIO의 blocking은 인터럽트로 빠져 나올 수 있다.

non-blocking방식은 입출력 작업시 스레드가 blocking 되지 않는다.

---

- IO vs NIO

IO의 경우 아래와 같은 상황일 때 사용하는 것이 좋다.

> 1. 연결 클라이언트의 수가 적을 때
> 2. 전송되는 데이터가 대용량일때
> 3. 순차적으로 처리될 필요가 있는 경우

NIO의 경우 아래와 같은 상황일 때 사용한다.

> 1. 연결 클라이언트의 수가 많을 때
> 2. 하나의 입출력 처리 작업이 오래 걸리지 않는 경우